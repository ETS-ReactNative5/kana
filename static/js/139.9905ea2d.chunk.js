!function(){"use strict";var t={139:function(t,e,n){var r=n(6516),i=n(4894),a=(n(9288),n(2895),n(6301),n(8333),n(9586),n(944),n(4657),n(5026),n(8538),n(1620)),o=(n(8840),n(5671)),s=n(3144),u=n(519),f=function(){function t(e,n){(0,o.Z)(this,t),this.status=e,this.coordinates=n}return(0,s.Z)(t,[{key:"clone",value:function(){return new t(this.status.deepcopy(),this.coordinates.clone())}},{key:"numberOfCells",value:function(){return this.status.num_obs()}},{key:"iterations",value:function(){return this.status.iterations()}},{key:"extractCoordinates",value:function(){return u.ab(this.numberOfCells(),this.coordinates.array())}},{key:"free",value:function(){this.status.delete(),this.coordinates.free(),this.status=null,this.coordinates=null}}]),t}();function c(t){return r.RE((function(e){return e.perplexity_to_k(t)}))}function l(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.maxIterations,i=void 0===n?1e3:n,a=e.runTime,o=void 0===a?null:a;null===o&&(o=-1),r.RE((function(e){return e.run_tsne(t.status,o,i,t.coordinates.offset)}))}n(5767);var d=n(7762),p=n(3324);function h(t){void 0!==t&&null!==t&&t.free()}function v(t,e){return JSON.stringify(t)!=JSON.stringify(e)}function y(t,e){if(Array.isArray(t)){var n,r=(0,d.Z)(t);try{for(r.s();!(n=r.n()).done;){y(n.value,e)}}catch(s){r.e(s)}finally{r.f()}}else if(t.constructor==Object)for(var i=0,a=Object.entries(t);i<a.length;i++){var o=(0,p.Z)(a[i],2);o[0];y(o[1],e)}else if(ArrayBuffer.isView(t)){if(!(t.buffer instanceof ArrayBuffer))throw"only ArrayBuffers should be in the message payload";e.push(t.buffer)}}var b,m={},g=!1,x={},O={};function C(t,e){m.init.numberOfCells();var n=function(t){return t?75:1e6}(t),r=m.init.clone();try{for(;r.iterations()<e;)if(l(r,{runTime:n,maxIterations:e}),t){var i=r.extractCoordinates();postMessage({type:"tsne_iter",x:i.x,y:i.y,iteration:r.iterations()},[i.x.buffer,i.y.buffer])}m.final=r.extractCoordinates()}finally{r.free()}}onmessage=function(t){var e=t.data.id;"INIT"==t.data.cmd?(b=r.j2({numberOfThreads:1})).then((function(t){postMessage({id:e,type:"init_worker",data:{status:"SUCCESS"}})})).catch((function(t){postMessage({id:e,type:"error",error:t})})):"RUN"==t.data.cmd?b.then((function(n){var o;"neighbors"in t.data?(h(m.neighbors),m.neighbors=function(t){var e=null,n=null,r=null,o=null;try{var s=t.num_obs,u=t.size;(n=new i.do(s)).set(t.runs),(r=new i.do(u)).set(t.indices),(o=new i.lt(u)).set(t.distances),e=a.Tz.unserialize(n,r,o)}finally{null!==n&&n.free(),null!==r&&r.free(),null!==o&&o.free()}return e}(t.data.neighbors),o=!0):o=!1;var s={perplexity:t.data.params.perplexity};o||v(s,x)?(h(m.init),m.init=function(t){var e,n,o,s,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=l.perplexity,p=void 0===d?30:d,h=l.checkMismatch,v=void 0===h||h;try{var y;if(t instanceof a.DV){var b=c(p);e=(0,a.wf)(t,b),y=e}else{if(v)if(c(p)*t.numberOfCells()!=t.size())throw"number of neighbors in 'x' does not match '3 * perplexity'";y=t}n=r.RE((function(t){return t.initialize_tsne(y.results,p)})),o=new i.lt(2*y.numberOfCells()),r.RE((function(t){return t.randomize_tsne_start(y.numberOfCells(),o.offset,42)})),s=new f(n,o)}catch(m){throw u.gd(n),u.gd(o),m}finally{u.gd(e)}return s}(m.neighbors,{perplexity:s.perplexity}),x=s,g=!0):g=!1;var l={iterations:t.data.params.iterations};(g||v(l,O))&&(C(t.data.params.animate,l.iterations),O=l),postMessage({id:e,type:"tsne_run",data:{status:"SUCCESS"}})})).catch((function(t){postMessage({id:e,type:"error",error:t})})):"RERUN"==t.data.cmd?b.then((function(t){C(!0,O.iterations),postMessage({id:e,type:"tsne_rerun",data:{status:"SUCCESS"}})})).catch((function(t){postMessage({id:e,type:"error",error:t})})):"FETCH"==t.data.cmd&&b.then((function(t){var n={x:m.final.x.slice(),y:m.final.y.slice(),iterations:O.iterations},r=[];y(n,r),postMessage({id:e,type:"tsne_fetch",data:n},r)})).catch((function(t){postMessage({id:e,type:"error",error:t})}))}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var a=e[r]={exports:{}};return t[r](a,a.exports,n),a.exports}n.m=t,n.x=function(){var t=n.O(void 0,[537,199],(function(){return n(139)}));return t=n.O(t)},function(){var t=[];n.O=function(e,r,i,a){if(!r){var o=1/0;for(c=0;c<t.length;c++){r=t[c][0],i=t[c][1],a=t[c][2];for(var s=!0,u=0;u<r.length;u++)(!1&a||o>=a)&&Object.keys(n.O).every((function(t){return n.O[t](r[u])}))?r.splice(u--,1):(s=!1,a<o&&(o=a));if(s){t.splice(c--,1);var f=i();void 0!==f&&(e=f)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[r,i,a]}}(),n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,{a:e}),e},n.d=function(t,e){for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.f={},n.e=function(t){return Promise.all(Object.keys(n.f).reduce((function(e,r){return n.f[r](t,e),e}),[]))},n.u=function(t){return"static/js/"+t+"."+{199:"997a1e1a",495:"5bc8be6f",537:"15d85ad3"}[t]+".chunk.js"},n.miniCssF=function(t){},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/kana/",function(){n.b=self.location+"/../../../";var t={139:1};n.f.i=function(e,r){t[e]||importScripts(n.p+n.u(e))};var e=self.webpackChunkkana=self.webpackChunkkana||[],r=e.push.bind(e);e.push=function(e){var i=e[0],a=e[1],o=e[2];for(var s in a)n.o(a,s)&&(n.m[s]=a[s]);for(o&&o(n);i.length;)t[i.pop()]=1;r(e)}}(),function(){var t=n.x;n.x=function(){return Promise.all([n.e(537),n.e(199)]).then(t)}}();n.x()}();
//# sourceMappingURL=139.9905ea2d.chunk.js.map