!function(){"use strict";var t={8653:function(t,n,e){var r=e(6516),i=e(4894),a=(e(9288),e(2895),e(6301),e(8333),e(9586),e(944),e(4657),e(5026),e(8538),e(1620)),o=(e(8840),e(519));var s=e(5671),u=e(3144),f=function(){function t(n,e){(0,s.Z)(this,t),this.status=n,this.coordinates=e}return(0,u.Z)(t,[{key:"clone",value:function(){return new t(this.status.deepcopy(),this.coordinates.clone())}},{key:"numberOfCells",value:function(){return this.status.num_obs()}},{key:"currentEpoch",value:function(){return this.status.epoch()}},{key:"totalEpochs",value:function(){return this.status.num_epochs()}},{key:"extractCoordinates",value:function(){return o.ab(this.numberOfCells(),this.coordinates.array())}},{key:"free",value:function(){this.status.delete(),this.coordinates.free(),this.status=null,this.coordinates=null}}]),t}();function c(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.runTime,i=void 0===e?null:e;null===i&&(i=-1),r.RE((function(n){return n.run_umap(t.status,i,t.coordinates.offset)}))}e(5767);var l=e(7762),d=e(3324);function h(t){void 0!==t&&null!==t&&t.free()}function p(t,n){return JSON.stringify(t)!=JSON.stringify(n)}function v(t,n){if(Array.isArray(t)){var e,r=(0,l.Z)(t);try{for(r.s();!(e=r.n()).done;){v(e.value,n)}}catch(s){r.e(s)}finally{r.f()}}else if(t.constructor==Object)for(var i=0,a=Object.entries(t);i<a.length;i++){var o=(0,d.Z)(a[i],2);o[0];v(o[1],n)}else if(ArrayBuffer.isView(t)){if(!(t.buffer instanceof ArrayBuffer))throw"only ArrayBuffers should be in the message payload";n.push(t.buffer)}}var y,m={},b=!1,g={},O={};function _(t){var n=function(t){return t?75:1e6}(t),e=m.init.clone();try{for(m.total=e.totalEpochs();e.currentEpoch()<m.total;)if(c(e,{runTime:n}),t){var r=e.extractCoordinates();postMessage({type:"umap_iter",x:r.x,y:r.y,iteration:e.currentEpoch()},[r.x.buffer,r.y.buffer])}m.final=e.extractCoordinates()}finally{e.free()}}onmessage=function(t){var n=t.data.id;"INIT"==t.data.cmd?(y=r.j2({numberOfThreads:1})).then((function(t){postMessage({id:n,type:"init_worker",data:{status:"SUCCESS"}})})).catch((function(t){postMessage({id:n,type:"error",error:t})})):"RUN"==t.data.cmd?y.then((function(e){var s;"neighbors"in t.data?(h(m.neighbors),m.neighbors=function(t){var n=null,e=null,r=null,o=null;try{var s=t.num_obs,u=t.size;(e=new i.do(s)).set(t.runs),(r=new i.do(u)).set(t.indices),(o=new i.lt(u)).set(t.distances),n=a.Tz.unserialize(e,r,o)}finally{null!==e&&e.free(),null!==r&&r.free(),null!==o&&o.free()}return n}(t.data.neighbors),s=!0):s=!1;var u={min_dist:t.data.params.min_dist,num_epochs:t.data.params.num_epochs};s||p(u,g)?(h(m.init),m.init=function(t){var n,e,s,u,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=c.neighbors,d=void 0===l?15:l,h=c.epochs,p=void 0===h?500:h,v=c.minDist,y=void 0===v?.01:v;try{var m;t instanceof a.DV?(n=(0,a.wf)(t,d),m=n):m=t,s=new i.lt(2*m.numberOfCells()),e=r.RE((function(t){return t.initialize_umap(m.results,p,y,s.offset)})),u=new f(e,s)}catch(b){throw o.gd(e),o.gd(s),b}finally{o.gd(n)}return u}(m.neighbors,{epochs:u.num_epochs,minDist:u.min_dist}),g=u,b=!0):b=!1;var c={};(b||p(c,O))&&(_(t.data.params.animate),O=c),postMessage({id:n,type:"umap_run",data:{status:"SUCCESS"}})})).catch((function(t){postMessage({id:n,type:"error",error:t})})):"RERUN"==t.data.cmd?y.then((function(t){_(!0),postMessage({id:n,type:"umap_rerun",data:{status:"SUCCESS"}})})).catch((function(t){postMessage({id:n,type:"error",error:t})})):"FETCH"==t.data.cmd&&y.then((function(t){var e={x:m.final.x.slice(),y:m.final.y.slice(),iterations:m.total},r=[];v(e,r),postMessage({id:n,type:"umap_fetch",data:e},r)})).catch((function(t){postMessage({id:n,type:"error",error:t})}))}}},n={};function e(r){var i=n[r];if(void 0!==i)return i.exports;var a=n[r]={exports:{}};return t[r](a,a.exports,e),a.exports}e.m=t,e.x=function(){var t=e.O(void 0,[537,199],(function(){return e(8653)}));return t=e.O(t)},function(){var t=[];e.O=function(n,r,i,a){if(!r){var o=1/0;for(c=0;c<t.length;c++){r=t[c][0],i=t[c][1],a=t[c][2];for(var s=!0,u=0;u<r.length;u++)(!1&a||o>=a)&&Object.keys(e.O).every((function(t){return e.O[t](r[u])}))?r.splice(u--,1):(s=!1,a<o&&(o=a));if(s){t.splice(c--,1);var f=i();void 0!==f&&(n=f)}}return n}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[r,i,a]}}(),e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,{a:n}),n},e.d=function(t,n){for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},e.f={},e.e=function(t){return Promise.all(Object.keys(e.f).reduce((function(n,r){return e.f[r](t,n),n}),[]))},e.u=function(t){return"static/js/"+t+"."+{199:"11b2c16c",495:"5bc8be6f",537:"2057833a"}[t]+".chunk.js"},e.miniCssF=function(t){},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="/kana/",function(){e.b=self.location+"/../../../";var t={653:1};e.f.i=function(n,r){t[n]||importScripts(e.p+e.u(n))};var n=self.webpackChunkkana=self.webpackChunkkana||[],r=n.push.bind(n);n.push=function(n){var i=n[0],a=n[1],o=n[2];for(var s in a)e.o(a,s)&&(e.m[s]=a[s]);for(o&&o(e);i.length;)t[i.pop()]=1;r(n)}}(),function(){var t=e.x;e.x=function(){return Promise.all([e.e(537),e.e(199)]).then(t)}}();e.x()}();
//# sourceMappingURL=653.0a0c9a22.chunk.js.map