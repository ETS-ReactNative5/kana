!function(){"use strict";var e={4109:function(e,n,r){var t={};r.r(t),r.d(t,{changed:function(){return F},compute:function(){return V},fetchAnnotations:function(){return te},fetchCountMatrix:function(){return $},fetchDimensions:function(){return ee},fetchGeneTypes:function(){return re},fetchGenes:function(){return ne},results:function(){return X},serialize:function(){return Y},unserialize:function(){return H}});var a={};r.r(a),r.d(a,{changed:function(){return ue},compute:function(){return le},fetchQCMetrics:function(){return me},fetchSums:function(){return he},results:function(){return fe},serialize:function(){return de},unserialize:function(){return pe}});var s={};r.r(s),r.d(s,{changed:function(){return ge},compute:function(){return be},fetchDiscards:function(){return ke},fetchDiscardsAsWasmArray:function(){return _e},results:function(){return we},serialize:function(){return xe},unserialize:function(){return Se}});var o={};r.r(o),r.d(o,{changed:function(){return Ne},compute:function(){return Te},fetchFilteredMatrix:function(){return Ue},fetchRetained:function(){return Re},results:function(){return Ae},serialize:function(){return ze},unserialize:function(){return Ge}});var u={};r.r(u),r.d(u,{changed:function(){return Ze},compute:function(){return Pe},fetchExpression:function(){return qe},fetchNormalizedMatrix:function(){return Ke},results:function(){return Be},serialize:function(){return Fe},unserialize:function(){return Ie}});var i={};r.r(i),r.d(i,{changed:function(){return Je},compute:function(){return Qe},fetchResiduals:function(){return $e},fetchSortedResiduals:function(){return He},results:function(){return Ve},serialize:function(){return Xe},unserialize:function(){return Ye}});var c={};r.r(c),r.d(c,{changed:function(){return rn},compute:function(){return an},fetchPCs:function(){return cn},results:function(){return sn},serialize:function(){return on},unserialize:function(){return un}});var l={};r.r(l),r.d(l,{changed:function(){return dn},compute:function(){return mn},fetchIndex:function(){return gn},rawCompute:function(){return pn},results:function(){return hn},serialize:function(){return vn},unserialize:function(){return yn}});var f={};r.r(f),r.d(f,{changed:function(){return xn},compute:function(){return _n},fetchNeighbors:function(){return Nn},rawCompute:function(){return Sn},results:function(){return kn},serialize:function(){return Mn},unserialize:function(){return En}});var d={};r.r(d),r.d(d,{changed:function(){return An},compute:function(){return Gn},fetchGraph:function(){return jn},results:function(){return Un},serialize:function(){return Rn},unserialize:function(){return Cn}});var p={};r.r(p),r.d(p,{changed:function(){return Pn},compute:function(){return Fn},fetchClustersAsWasmArray:function(){return Bn},results:function(){return In},serialize:function(){return Kn},unserialize:function(){return qn}});var m={};r.r(m),r.d(m,{changed:function(){return Jn},compute:function(){return Vn},fetchClustersAsWasmArray:function(){return Qn},results:function(){return Xn},serialize:function(){return Yn},unserialize:function(){return Hn}});var h={};r.r(h),r.d(h,{changed:function(){return nr},compute:function(){return rr},fetchClustersAsWasmArray:function(){return or},results:function(){return tr},serialize:function(){return ar},unserialize:function(){return sr}});var v={};r.r(v),r.d(v,{animate:function(){return _r},changed:function(){return vr},compute:function(){return gr},initialize:function(){return hr},results:function(){return br},serialize:function(){return wr},unserialize:function(){return Sr}});var y={};r.r(y),r.d(y,{animate:function(){return Cr},changed:function(){return Or},compute:function(){return Ar},initialize:function(){return Nr},results:function(){return zr},serialize:function(){return Gr},unserialize:function(){return Rr}});var g={};r.r(g),r.d(g,{changed:function(){return Kr},compute:function(){return qr},fetchGroupMeans:function(){return Xr},fetchGroupResults:function(){return Qr},numberOfGroups:function(){return Vr},results:function(){return Wr},serialize:function(){return Lr},unserialize:function(){return Jr}});var b={};r.r(b),r.d(b,{changed:function(){return tt},compute:function(){return mt},results:function(){return ht},serialize:function(){return yt},unserialize:function(){return bt}});var w={};r.r(w),r.d(w,{addSelection:function(){return Ot},changed:function(){return _t},compute:function(){return kt},fetchResults:function(){return At},removeSelection:function(){return Tt},results:function(){return Mt},serialize:function(){return Et},unserialize:function(){return Nt}});var x=r(5861),S=r(3324),_=r(7757),k=r.n(_),M=r(9451),E=r(1413),N=r(7762),O=r(6737);function T(e){if(void 0!==e&&null!==e)try{e.free()}catch(n){}}function A(e){if("reloaded"in e){for(var n=0,r=Object.entries(e.reloaded);n<r.length;n++){var t=(0,S.Z)(r[n],2),a=(t[0],t[1]);a instanceof O.PQ&&a.free()}delete e.reloaded}}function z(e,n){return JSON.stringify(e)!=JSON.stringify(n)}function G(e){var n=-1/0,r=1/0;return e.forEach((function(e){n<e&&(n=e),r>e&&(r=e)})),[r,n]}function U(e,n,r){var t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"buffer",a=!0;if(t in r){var s=r[t];s.size!=e||s.constructor.className!=n?s.free():a=!1}if(a)switch(n){case"Uint8Array":r[t]=M.TS(e);break;case"Int32Array":r[t]=M.Wf(e);break;case"Float64Array":r[t]=M.RJ(e);break;default:throw"allocating '"+n+"' not yet supported"}return r[t]}function R(e,n){if(Array.isArray(e)){var r,t=(0,N.Z)(e);try{for(t.s();!(r=t.n()).done;){R(r.value,n)}}catch(u){t.e(u)}finally{t.f()}}else if(e.constructor==Object)for(var a=0,s=Object.entries(e);a<s.length;a++){var o=(0,S.Z)(s[a],2);o[0];R(o[1],n)}else if(ArrayBuffer.isView(e)){if(!(e.buffer instanceof ArrayBuffer))throw"only ArrayBuffers should be in the message payload";n.push(e.buffer)}}function C(e){return"object"===typeof e&&!1===Array.isArray(e)}var j=r(1414),Z=r(8308),D={},P={},B={},F=!1;function I(e){for(var n=[],r=0;r<e;r++)n.push("Gene ".concat(r+1));return{id:n}}function K(){for(var e={},n=ne(),r=0,t=Object.entries(n);r<t.length;r++){var a=(0,S.Z)(t[r],2),s=a[0],o=a[1];e[s]=M.gn(o)}D.gene_types=e}function q(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"\t",t=n.name.split(".").pop();"gz"==t&&(e=Z.ec(e));var a=new TextDecoder,s=a.decode(e),o=j.Z(r),u=o.parseRows(s);return u}function W(e){T(D.matrix);var n=e.filter((function(e){return"mtx"==e.type}))[0],r=new Uint8Array(n.buffer),t="gz"==n.name.split(".").pop();if(D.matrix=M.DK(r,{compressed:t}),1==(a=e.filter((function(e){return"genes"==e.type}))).length){var a=a[0],s=q(new Uint8Array(a.buffer),a);if(s.length!=D.matrix.numberOfRows())throw"number of matrix rows is not equal to the number of genes in '"+a.name+"'";var o=[],u=[];s.forEach((function(e){o.push(e[0]),u.push(e[1])})),D.genes={id:o,symbol:u}}else D.genes=I(D.matrix.numberOfRows());if(M.dc(D.matrix,D.genes),1==(i=e.filter((function(e){return"annotations"==e.type}))).length){var i=i[0],c=q(new Uint8Array(i.buffer),i),l=D.matrix.numberOfColumns()-c.length,f=!1;if(0===l)f=!1;else{if(-1!==l)throw"number of annotations rows is not equal to the number of cells in '"+i.name+"'";f=!0}var d=[];f?d=c.shift():c[0].forEach((function(e,n){d.push("Column_".concat(n+1))})),D.annotations={},d.forEach((function(e,n){D.annotations[e]=c.map((function(e){return e[n]}))}))}else D.annotations=null;"reloaded"in D&&delete D.reloaded}function L(e){T(D.matrix);var n=e[0],r=n.name;M.NC(r,new Uint8Array(n.buffer));try{D.matrix=M.EF(r,"matrix"),D.genes=null;var t=M.JM(r);if("features"in t.matrix){var a=t.matrix.features;"id"in a&&"string dataset"===a.id&&(D.genes={id:M.dO(r,"matrix/features/id").contents},"name"in a&&"string dataset"===a.name&&(D.genes.names=M.dO(r,"matrix/features/name").contents))}D.annotations=null}finally{M.Yd(r)}null===D.genes&&(D.genes=I(D.matrix.numberOfRows())),M.dc(D.matrix,D.genes),"reloaded"in D&&delete D.reloaded}function J(e,n){T(D.matrix);var r=e[0],t=r.name;M.NC(t,new Uint8Array(r.buffer));try{D.matrix=M.EF(t,"X");var a=M.JM(t);if(D.genes=null,"var"in a){var s=a.var;if(C(s)&&"_index"in s&&"string dataset"==s._index){D.genes={_index:M.dO(t,"var/_index").contents};for(var o=0,u=Object.entries(s);o<u.length;o++){var i=(0,S.Z)(u[o],2),c=i[0];"string dataset"===i[1]&&(c.match(/name/i)||c.match(/symb/i))&&(D.genes[c]=M.dO(t,"var/".concat(c)).contents)}}}if(D.annotations=null,"obs"in a){var l=a.obs;if(D.annotations={},C(l)){"_index"in l&&"string dataset"==l._index&&(D.annotations._index=M.dO(t,"obs/_index").contents);for(var f=0,d=Object.entries(l);f<d.length;f++){var p=(0,S.Z)(d[f],2),m=p[0],h=p[1];if("string dataset"===h||"integer dataset"===h||"float dataset"===h){var v=M.dO(t,"obs/".concat(m)).contents;if("__categories"in l&&"string dataset"==l.__categories[m]){var y=M.dO(t,"obs/__categories/".concat(m)).contents;D.annotations[m]={type:"factor",index:y,factor:v}}else D.annotations[m]=v}}}}}finally{M.Yd(t)}null===D.genes&&(D.genes=I(D.matrix.numberOfRows())),M.dc(D.matrix,D.genes),"reloaded"in D&&delete D.reloaded}function Q(e,n){for(var r=new FileReaderSync,t=0;t<2;t++){var a,s={type:n,files:[]};a=0==t?function(e){return e.size}:function(e){return r.readAsArrayBuffer(e)};var o,u=(0,N.Z)(e.file);try{for(u.s();!(o=u.n()).done;){var i=o.value;s.files.push({type:"h5",name:i.name,buffer:a(i)})}}catch(c){u.e(c)}finally{u.f()}if(0==t){if(!z(B,s))return void(F=!1);B=s,F=!0}else P=s,"10X"==n?L(s.files):J(s.files)}}function V(e){switch(e.format){case"mtx":!function(e){for(var n=new FileReaderSync,r=0;r<2;r++){var t,a={type:"MatrixMarket",files:[]};t=0==r?function(e){return e.size}:function(e){return n.readAsArrayBuffer(e)};var s,o=(0,N.Z)(e.mtx);try{for(o.s();!(s=o.n()).done;){var u=s.value;a.files.push({type:"mtx",name:u.name,buffer:t(u)})}}catch(l){o.e(l)}finally{o.f()}if(null!==e.gene){if(1!==e.gene.length)throw"expected no more than one gene file";var i=e.gene[0];a.files.push({type:"genes",name:i.name,buffer:t(i)})}if(null!==e.barcode){if(1!==e.barcode.length)throw"expected no more than one cell annotation file";var c=e.barcode[0];a.files.push({type:"annotations",name:c.name,buffer:t(c)})}if(0==r){if(!z(B,a))return void(F=!1);B=a,F=!0}else P=a,W(a.files)}}(e.files);break;case"hdf5":case"tenx":Q(e.files,"10X");break;case"h5ad":Q(e.files,"H5AD");break;case"kana":break;default:throw"unknown matrix file extension: '"+e.format+"'"}K()}function X(){var e={dimensions:ee()};return"reloaded"in D?(e.genes=(0,E.Z)({},D.reloaded.genes),D.annotations&&(e.annotations=Object.keys(D.reloaded.annotations))):(e.genes=(0,E.Z)({},D.genes),D.annotations&&(e.annotations=Object.keys(D.annotations))),e}function Y(){var e={};"reloaded"in D?(e.genes=(0,E.Z)({},D.reloaded.genes),e.num_cells=D.reloaded.num_cells,D.reloaded.annotations&&(e.annotations=D.reloaded.annotations)):(e.genes=(0,E.Z)({},D.genes),e.num_cells=D.matrix.numberOfColumns(),D.annotations&&(e.annotations=D.annotations));var n=(0,E.Z)({},P);return n.files=P.files.map((function(e){return(0,E.Z)({},e)})),{parameters:n,contents:e}}function H(e){P=e.parameters,D.reloaded=e.contents,K()}function $(){if("reloaded"in D)if("MatrixMarket"==P.type)W(P.files);else if("H5AD"==P.type)J(P.files);else if("10X"==P.type)L(P.files);else{if("HDF5"!=P.type)throw"unrecognized count matrix format, ".concat(P.type);P.files[0].name.match(/h5ad$/i)?J(P.files):L(P.files)}return D.matrix}function ee(){return"reloaded"in D?{num_genes:Object.values(D.reloaded.genes)[0].length,num_cells:D.reloaded.num_cells}:{num_genes:D.matrix.numberOfRows(),num_cells:D.matrix.numberOfColumns()}}function ne(){return"reloaded"in D?D.reloaded.genes:D.genes}function re(){return D.gene_types}function te(e){var n,r;if("reloaded"in D?(n=D.reloaded.annotations,r=D.reloaded.matrix.numberOfColumns()):(n=D.annotations,r=D.matrix.numberOfColumns()),!(e in n))throw"column ".concat(e," does not exist in col.tsv");if(C(n[e])&&"type"in n[e])return n[e];var t={},a=new Uint8Array(r);return n[e].map((function(e,n){e in t||(t[e]=Object.keys(t).length),a[n]=t[e]})),{index:Object.keys(t),factor:a}}var ae={};ae.ensembl=new Set(["ENSMUSG00000064336","ENSMUSG00000064337","ENSMUSG00000064338","ENSMUSG00000064339","ENSMUSG00000064340","ENSMUSG00000064341","ENSMUSG00000064342","ENSMUSG00000064343","ENSMUSG00000064344","ENSMUSG00000064345","ENSMUSG00000064346","ENSMUSG00000064347","ENSMUSG00000064348","ENSMUSG00000064349","ENSMUSG00000064350","ENSMUSG00000064351","ENSMUSG00000064352","ENSMUSG00000064353","ENSMUSG00000064354","ENSMUSG00000064355","ENSMUSG00000064356","ENSMUSG00000064357","ENSMUSG00000064358","ENSMUSG00000064359","ENSMUSG00000064360","ENSMUSG00000064361","ENSMUSG00000064363","ENSMUSG00000064364","ENSMUSG00000064365","ENSMUSG00000064366","ENSMUSG00000064367","ENSMUSG00000064368","ENSMUSG00000064369","ENSMUSG00000064370","ENSMUSG00000064371","ENSMUSG00000064372","ENSMUSG00000065947","ENSG00000198695","ENSG00000198712","ENSG00000198727","ENSG00000198763","ENSG00000198786","ENSG00000198804","ENSG00000198840","ENSG00000198886","ENSG00000198888","ENSG00000198899","ENSG00000198938","ENSG00000209082","ENSG00000210049","ENSG00000210077","ENSG00000210082","ENSG00000210100","ENSG00000210107","ENSG00000210112","ENSG00000210117","ENSG00000210127","ENSG00000210135","ENSG00000210140","ENSG00000210144","ENSG00000210151","ENSG00000210154","ENSG00000210156","ENSG00000210164","ENSG00000210174","ENSG00000210176","ENSG00000210184","ENSG00000210191","ENSG00000210194","ENSG00000210195","ENSG00000210196","ENSG00000211459","ENSG00000212907","ENSG00000228253"]),ae.symbol=new Set(["mt-Tf","mt-Rnr1","mt-Tv","mt-Rnr2","mt-Tl1","mt-Nd1","mt-Ti","mt-Tq","mt-Tm","mt-Nd2","mt-Tw","mt-Ta","mt-Tn","mt-Tc","mt-Ty","mt-Co1","mt-Ts1","mt-Td","mt-Co2","mt-Tk","mt-Atp8","mt-Atp6","mt-Co3","mt-Tg","mt-Nd3","mt-Tr","mt-Nd4","mt-Th","mt-Ts2","mt-Tl2","mt-Nd5","mt-Nd6","mt-Te","mt-Cytb","mt-Tt","mt-Tp","mt-Nd4l","MT-ND6","MT-CO2","MT-CYB","MT-ND2","MT-ND5","MT-CO1","MT-ND3","MT-ND4","MT-ND1","MT-ATP6","MT-CO3","MT-TL1","MT-TF","MT-TV","MT-RNR2","MT-TI","MT-TQ","MT-TM","MT-TW","MT-TA","MT-TN","MT-TC","MT-TY","MT-TS1","MT-TD","MT-TK","MT-TG","MT-TR","MT-TH","MT-TS2","MT-TL2","MT-TE","MT-TT","MT-TP","MT-RNR1","MT-ND4L","MT-ATP8"]);var se={},oe={},ue=!1;function ie(e){T(se.raw);var n=U(1*(c=$()).numberOfRows(),"Uint8Array",se);n.fill(0);for(var r=ne(),t=n.array(),a=0,s=Object.entries(r);a<s.length;a++){var o=(0,S.Z)(s[a],2),u=(o[0],o[1]);if(e.use_mito_default)u.forEach((function(e,n){(ae.symbol.has(e)||ae.ensembl.has(e))&&(t[n]=1)}));else{var i=e.mito_prefix.toLowerCase();u.forEach((function(e,n){e.toLowerCase().startsWith(i)&&(t[n]=1)}))}}var c=$();se.raw=M.i4(c,n),delete se.reloaded}function ce(){var e={};if("reloaded"in se){var n=se.reloaded;e.sums=n.sums.slice(),e.detected=n.detected.slice(),e.proportion=n.proportion.slice()}else{n=se.raw;e.sums=n.sums(),e.detected=n.detected(),e.proportion=n.subsetProportions(0)}return e}function le(e){F||z(oe,e)?(ie(e),oe=e,ue=!0):ue=!1}function fe(){var e=ce(),n={};return n.sums=G(e.sums),n.detected=G(e.detected),n.proportion=G(e.proportion),{data:e,ranges:n}}function de(){return{parameters:oe,contents:ce()}}function pe(e){oe=e.parameters,se.reloaded=e.contents}function me(){return"reloaded"in se&&ie(),se.raw}function he(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.unsafe,r=void 0===n||n;return"reloaded"in se?se.reloaded.sums:se.raw.sums({copy:!r})}var ve={},ye={},ge=!1;function be(e){if(ue||z(ye,e)){T(ve.raw);var n=me();ve.raw=M.rU(n,{numberOfMADs:e.nmads}),A(ve),ge=!0,ye=e}else ge=!1}function we(){var e;if("reloaded"in ve)e={sums:ve.reloaded.sums,detected:ve.reloaded.detected,proportion:ve.reloaded.proportion};else{var n=ve.raw;e={sums:n.thresholdsSums()[0],detected:n.thresholdsDetected()[0],proportion:n.thresholdsSubsetProportions(0)[0]}}return e}function xe(){var e=we();return e.discards=ke(),{parameters:ye,contents:e}}function Se(e){ye=e.parameters,A(ve),ve.reloaded=e.contents;var n=M.TS(ve.reloaded.discards.length);n.set(ve.reloaded.discards),ve.reloaded.discards=n}function _e(){return"reloaded"in ve?ve.reloaded.discards:ve.raw.discardOverall({copy:"view"})}function ke(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.unsafe,t=void 0!==r&&r;return e="reloaded"in ve?ve.reloaded.discards.array():ve.raw.discardOverall(),t?e:e.slice()}var Me={},Ee={},Ne=!1;function Oe(){T(Me.matrix);var e=$(),n=_e();Me.matrix=M.b_(e,n),delete Me.reloaded}function Te(e){F||ge||z(Ee,e)?(Oe(),Ee=e,Ne=!0):Ne=!1}function Ae(){return{retained:Re()}}function ze(){return{parameters:Ee,contents:Ae()}}function Ge(e){Ee=e.parameters,Me.reloaded=e.contents;var n,r=ke({unsafe:!0}),t=0,a=(0,N.Z)(r);try{for(a.s();!(n=a.n()).done;){0==n.value&&t++}}catch(s){a.e(s)}finally{a.f()}Me.reloaded.retained=t}function Ue(){return"reloaded"in Me&&Oe(),Me.matrix}function Re(){return"reloaded"in Me?Me.reloaded.retained:Me.matrix.numberOfColumns()}var Ce={},je={},Ze=!1;function De(){for(var e=Ue(),n=U(e.numberOfColumns(),"Float64Array",Ce),r=he({unsafe:!0}),t=ke({unsafe:!0}),a=n.array(),s=0,o=0;o<t.length;++o)t[o]||(a[s]=r[o],s++);if(s!=e.numberOfColumns())throw"normalization and filtering are not in sync";T(Ce.matrix),Ce.matrix=M.gk(e,{sizeFactors:n}),delete Ce.reloaded}function Pe(e){ue||Ne||z(je,e)?(De(),je=e,Ze=!0):Ze=!1}function Be(){return{}}function Fe(){return{parameters:je,contents:{}}}function Ie(e){je=e.parameters,Ce.reloaded=e.contents}function Ke(){return"reloaded"in Ce&&De(),Ce.matrix}function qe(e){var n=Ke(),r=U(n.numberOfColumns(),"Float64Array",Ce);return n.row(e,{buffer:r}),r.slice()}var We={},Le={},Je=!1;function Qe(e){if(Ze||z(Le,e)){var n=Ke();We.raw=M.rY(n,{span:e.span}),We.sorted_residuals=We.raw.residuals().slice(),We.sorted_residuals.sort(),Le=e,delete We.reloaded,Je=!0}else Je=!1}function Ve(){return"reloaded"in We?{means:We.reloaded.means.slice(),vars:We.reloaded.vars.slice(),fitted:We.reloaded.fitted.slice(),resids:We.reloaded.resids.slice()}:function(){var e=We.raw;return{means:e.means(),vars:e.variances(),fitted:e.fitted(),resids:e.residuals()}}()}function Xe(){return{parameters:Le,contents:Ve()}}function Ye(e){Le=e.parameters,We.reloaded=e.contents,We.sorted_residuals=We.reloaded.resids.slice(),We.sorted_residuals.sort()}function He(){return We.sorted_residuals}function $e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.unsafe,r=void 0!==n&&n;return"reloaded"in We?We.reloaded.resids:We.raw.residuals({copy:!r})}var en={},nn={},rn=!1;function tn(){return"reloaded"in en?en.reloaded.pcs:en.raw.principalComponents({copy:"view"})}function an(e){if(Ze||Je||z(nn,e)){var n=He(),r=n[n.length-e.num_hvgs],t=Ke(),a=U(t.numberOfRows(),"Uint8Array",en),s=$e({unsafe:!0});a.array().forEach((function(e,n,t){t[n]=s[n]>=r})),T(en.raw),en.raw=M.a9(t,{features:a,numberOfPCs:e.num_pcs}),A(en),rn=!0,nn=e}else rn=!1}function sn(){var e;if("reloaded"in en)e=en.reloaded.var_exp.slice();else{var n=en.raw;e=n.varianceExplained();var r=n.totalVariance();e.forEach((function(n,t){e[t]=n/r}))}return{var_exp:e}}function on(){var e=sn();return e.pcs=tn().slice(),{parameters:nn,contents:e}}function un(e){nn=e.parameters,A(en),en.reloaded=e.contents;var n=M.RJ(en.reloaded.pcs.length);n.set(en.reloaded.pcs),en.reloaded.pcs=n}function cn(){var e=tn();return{pcs:e,num_pcs:nn.num_pcs,num_obs:e.length/nn.num_pcs}}var ln={},fn={},dn=!1;function pn(e){T(ln.raw);var n=cn();ln.raw=M.Fu(n.pcs,{numberOfDims:n.num_pcs,numberOfCells:n.num_obs}),delete ln.reloaded}function mn(e){rn||z(fn,e)?(pn(),fn=e,dn=!0):dn=!1}function hn(){return{}}function vn(){return{parameters:fn,contents:{}}}function yn(e){fn=e.parameters,ln.reloaded=e.contents}function gn(){return"reloaded"in ln&&pn(),ln.raw}var bn={},wn={},xn=!1;function Sn(e){T(bn.raw);var n=gn();bn.raw=M.wf(n,e.k),delete bn.reloaded}function _n(e){var n=e.cluster_method;delete e.cluster_method,null===xn||dn||z(wn,e)?n.startsWith("snn_")?(Sn(e),wn=e,xn=!0):(xn=null,T(bn.raw),delete bn.reloaded,wn=e):xn=!1}function kn(){return{}}function Mn(){var e={parameters:wn};return e.contents=null===xn?null:{},e}function En(e){wn=e.parameters,null!==e.contents?bn.reloaded=e.contents:xn=null}function Nn(){return"reloaded"in bn&&Sn(wn),bn.raw}var On={},Tn={},An=!1;function zn(e){T(On.raw);var n=Nn();On.raw=M.bD(n,{scheme:e.scheme}),delete On.reloaded}function Gn(e){null===xn?(An=null,T(On.raw),delete On.reloaded,Tn=e):null===An||xn||z(Tn,e)?(zn(e),Tn=e,An=!0):An=!1}function Un(){return{}}function Rn(){var e={parameters:Tn};return e.contents=null===An?null:{},e}function Cn(e){Tn=e.parameters,void 0!==e?On.reloaded=e.contents:An=null}function jn(){return"reloaded"in On&&zn(Tn),On.raw}var Zn={},Dn={},Pn=!1;function Bn(){return"reloaded"in Zn?Zn.reloaded.clusters:Zn.raw.membership({copy:"view"})}function Fn(e){if(null===An)Pn=null,T(Zn.raw),A(Zn),Dn=e;else if(null===Pn||An||z(Dn,e)){T(Zn.raw);var n=jn();Zn.raw=M.ZI(n,{resolution:e.resolution}),Dn=e,Pn=!0,A(Zn)}else Pn=!1}function In(){return{}}function Kn(){var e={parameters:Dn};return e.contents=null===Pn?null:{clusters:Bn().slice()},e}function qn(e){if(Dn=e.parameters,null!==e.contents){A(Zn),Zn.reloaded=e.contents;var n=M.Wf(Zn.reloaded.clusters.length);n.set(Zn.reloaded.clusters),Zn.reloaded.clusters=n}else Pn=null}var Wn={},Ln={},Jn=!1;function Qn(){return"reloaded"in Wn?Wn.reloaded.clusters:Wn.raw.clusters({copy:"view"})}function Vn(e){var n=e.cluster_method;if(delete e.cluster_method,null===Jn||rn||z(Ln,e))if("kmeans"!==n)Jn=null,T(Wn.raw),A(Wn),Ln=e;else{T(Wn.raw);var r=cn();Wn.raw=M.eu(r.pcs,e.k,{numberOfDims:r.num_pcs,numberOfCells:r.num_obs,initMethod:"pca-part"}),Ln=e,Jn=!0,A(Wn)}else Jn=!1}function Xn(){return{}}function Yn(){var e={parameters:Ln};return e.contents=null===Jn?null:{clusters:Qn().slice()},e}function Hn(e){if(Ln=e.parameters,null!==e.contents){A(Wn),Wn.reloaded=e.contents;var n=M.Wf(Wn.reloaded.clusters.length);n.set(Wn.reloaded.clusters),Wn.reloaded.clusters=n}else Jn=null}var $n={},er={},nr=!1;function rr(e){nr=!0,z(er,e)||("snn_graph"==e.method?Pn||(nr=!1):"kmeans"==e.method&&(Jn||(nr=!1))),nr&&(delete $n.reloaded,er=e,nr=!0)}function tr(){return{clusters:or().slice()}}function ar(){return{parameters:er,contents:{}}}function sr(e){er=e.parameters,$n.reloaded=e.contents}function or(){return"snn_graph"==er.method?Bn():"kmeans"==er.method?Qn():void 0}function ur(e){var n=gn(),r={num_obs:n.numberOfCells()},t=null,a=null,s=null,o=null;try{t=M.wf(n,e),a=M.Wf(t.numberOfCells()),s=M.Wf(t.size()),o=M.RJ(t.size()),t.serialize({runs:a,indices:s,distances:o}),r.size=t.size(),r.runs=a.array().slice(),r.indices=s.array().slice(),r.distances=o.array().slice()}finally{null!==t&&t.free(),null!==a&&a.free(),null!==s&&s.free(),null!==o&&o.free()}return r}function ir(e,n,r){var t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=r.counter,s=new Promise((function(e,n){r.promises[a]={resolve:e,reject:n}}));return r.counter++,n.id=a,e.postMessage(n,t),s}function cr(e,n){return e.onmessage=function(e){var r=e.data.type;if(r.endsWith("_iter"))postMessage({type:r,resp:{x:e.data.x,y:e.data.y,iteration:e.data.iteration}},[e.data.x.buffer,e.data.y.buffer]);else{var t=e.data.id,a=n.promises[t];"error"==r?a.reject(e.data.error):a.resolve(e.data.data),delete n.promises[t]}},ir(e,{cmd:"INIT"},n)}function lr(e,n,r,t){var a={cmd:"RUN",params:n},s=[];return null!==r&&(a.neighbors=r,R(r,s)),ir(e,a,t,s)}function fr(e,n){if("reloaded"in n){var r=(0,E.Z)({},n.reloaded);return r.x=r.x.slice(),r.y=r.y.slice(),new Promise((function(e){return e(r)}))}return n.run.then((function(r){return ir(e,{cmd:"FETCH"},n)}))}var dr={counter:0,promises:{}},pr={},mr=null;function hr(){return cr(mr=new Worker(new URL(r.p+r.u(139),r.b),{type:void 0}),dr)}var vr=!1;function yr(e,n){var r=null;n&&(r=ur(M.Tk(e.perplexity)));dr.run=lr(mr,e,r,dr)}function gr(e){dn||z(pr,e)?(yr(e,dn||z(pr.perplexity,e.perplexity)),pr=e,delete dr.reloaded,vr=!0):vr=!1}function br(){return fr(mr,dr)}function wr(){return xr.apply(this,arguments)}function xr(){return(xr=(0,x.Z)(k().mark((function e(){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fr(mr,dr);case 2:return n=e.sent,e.abrupt("return",{parameters:pr,contents:n});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sr(e){pr=e.parameters,dr.reloaded=e.contents}function _r(){if("reloaded"in dr){var e=(0,E.Z)({},pr);return e.animate=!0,yr(e,!0),delete dr.reloaded,dr.run.then((function(e){return{type:"tsne_rerun",data:{status:"SUCCESS"}}}))}return ir(mr,{cmd:"RERUN"},dr)}var kr={counter:0,promises:{}},Mr={},Er=null;function Nr(){Er=new Worker(new URL(r.p+r.u(653),r.b),{type:void 0}),kr.initialized=cr(Er,kr)}var Or=!1;function Tr(e,n){var r=null;n&&(r=ur(e.num_neighbors)),kr.run=lr(Er,e,r,kr)}function Ar(e){dn||z(Mr,e)?(Tr(e,dn||z(Mr.num_neighbors,e.num_neighbors)),Mr=e,delete kr.reloaded,Or=!0):Or=!1}function zr(){return fr(Er,kr)}function Gr(){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,x.Z)(k().mark((function e(){var n;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fr(Er,kr);case 2:return n=e.sent,e.abrupt("return",{parameters:Mr,contents:n});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rr(e){Mr=e.parameters,kr.reloaded=e.contents}function Cr(){if("reloaded"in kr){var e=(0,E.Z)({},Mr);return e.animate=!0,Tr(e,!0),delete kr.reloaded,kr.run.then((function(e){return{type:"umap_rerun",data:{status:"SUCCESS"}}}))}return ir(Er,{cmd:"RERUN"},kr)}function jr(e,n){return{means:e.means(n),detected:e.detected(n),lfc:{min:e.lfc(n,{summary:0}),mean:e.lfc(n,{summary:1}),"min-rank":e.lfc(n,{summary:4})},delta_detected:{min:e.deltaDetected(n,{summary:0}),mean:e.deltaDetected(n,{summary:1}),"min-rank":e.deltaDetected(n,{summary:4})},cohen:{min:e.cohen(n,{summary:0}),mean:e.cohen(n,{summary:1}),"min-rank":e.cohen(n,{summary:4})},auc:{min:e.auc(n,{summary:0}),mean:e.auc(n,{summary:1}),"min-rank":e.auc(n,{summary:4})}}}function Zr(e){return void 0!==e}function Dr(e,n,r,t){r&&void 0!==r||(r="cohen-min-rank");var a,s,o=Zr(n),u=!1;if(o){var i,c="mean";if(r.match(/-min$/)?c="min":r.match(/-min-rank$/)&&(u=!0,c="min-rank"),r.match(/^cohen-/))i="cohen";else if(r.match(/^auc-/))i="auc";else if(r.match(/^lfc-/))i="lfc";else{if(!r.match(/^delta-d-/))throw"unknown rank type '"+r+"'";i="delta_detected"}s=n[t][i][c]}else{var l=1;if(r.match(/-min$/)?l=0:r.match(/-min-rank$/)&&(u=!0,l=4),r.match(/^cohen-/))s=e.cohen(t,{summary:l,copy:!1});else if(r.match(/^auc-/))s=e.auc(t,{summary:l,copy:!1});else if(r.match(/^lfc-/))s=e.lfc(t,{summary:l,copy:!1});else{if(!r.match(/^delta-d-/))throw"unknown rank type '"+r+"'";s=e.deltaDetected(t,{summary:l,copy:!1})}}a=new Int32Array(s.length);for(var f=0;f<a.length;f++)a[f]=f;u?a.sort((function(e,n){return s[e]-s[n]})):a.sort((function(e,n){return s[n]-s[e]}));var d,p,m,h,v=function(e){for(var n=new Float64Array(e.length),r=0;r<a.length;r++)n[r]=e[a[r]];return n};if(o){var y=n[t];p=v(y.means),d=v(y.detected),m=v(y.lfc.mean),h=v(y.delta_detected.mean)}else d=v(e.detected(t,{copy:!1})),p=v(e.means(t,{copy:!1})),m=v(e.lfc(t,{summary:1,copy:!1})),h=v(e.deltaDetected(t,{summary:1,copy:!1}));return{ordering:a,means:p,detected:d,lfc:m,delta_detected:h}}function Pr(e,n,r){var t=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return Zr(n)?n[r].means:e.means(r,{copy:t})}var Br,Fr={},Ir={},Kr=!1;function qr(e){if(Ze||nr||z(Ir,e)){T(Fr.raw);var n=Ke(),r=or();Fr.raw=M.y5(n,r),Ir=e,delete Fr.reloaded,Kr=!0}else Kr=!1}function Wr(){return{}}function Lr(){if("reloaded"in Fr)e=Fr.reloaded;else for(var e=[],n=Fr.raw.numberOfGroups(),r=0;r<n;r++)e.push(jr(Fr.raw,r));return{parameters:Ir,contents:e}}function Jr(e){Ir=e.parameters,Fr.reloaded=e.contents}function Qr(e,n){return Dr(Fr.raw,Fr.reloaded,e,n)}function Vr(){return function(e,n){return Zr(n)?n.length:e.numberOfGroups()}(Fr.raw,Fr.reloaded)}function Xr(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Pr(Fr.raw,Fr.reloaded,e,n)}var Yr=null;function Hr(){return null===Yr&&(Yr=new Promise((function(e,n){(Br=indexedDB.open("DownloadsDB",3)).onupgradeneeded=function(e){var n=e.target.result;try{n.deleteObjectStore("downloads")}catch(e){}n.createObjectStore("downloads",{keyPath:"url"})},Br.onsuccess=function(){e(null)},Br.onerror=function(){n("failed to initialize DownloadsDB")}}))),Yr}function $r(e){return et.apply(this,arguments)}function et(){return et=(0,x.Z)(k().mark((function e(n){var r,t,a,s,o,u,i,c,l,f,d,p,m=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.length>1&&void 0!==m[1]?m[1]:null,t=m.length>2&&void 0!==m[2]&&m[2],e.next=4,Yr;case 4:if(t){e.next=13;break}return a=Br.result.transaction(["downloads"],"readonly"),s=a.objectStore("downloads"),o=new Promise((function(e){var r=s.get(n);r.onsuccess=function(n){void 0!==r.result?e(r.result.payload):e(null)},r.onerror=function(n){e(null)}})),e.next=10,o;case 10:if(null===(u=e.sent)){e.next=13;break}return e.abrupt("return",u);case 13:return i=null==r?fetch(n):fetch(n,r),e.next=16,i;case 16:if((c=e.sent).ok){e.next=19;break}throw"failed to download '"+n+"' ("+c.status+")";case 19:return e.next=21,c.arrayBuffer();case 21:return l=e.sent,f=Br.result.transaction(["downloads"],"readwrite"),d=f.objectStore("downloads"),p=new Promise((function(e){var r=d.put({url:n,payload:l});r.onsuccess=function(n){e(!0)},r.onerror=function(n){e(!1)}})),e.next=27,p;case 27:if(e.sent){e.next=30;break}throw"failed to download resources for '"+n+"'";case 30:return e.abrupt("return",l);case 31:case"end":return e.stop()}}),e)}))),et.apply(this,arguments)}var nt={},rt={},tt=!1,at={},st={},ot={},ut={},it="https://cors-proxy.aaron-lun.workers.dev",ct="https://github.com/clusterfork/singlepp-references/releases/download/hs-latest",lt="https://github.com/clusterfork/singlepp-references/releases/download/mm-latest";function ft(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gz",r=e;"gz"==n&&(r=Z.ec(e));var t=new TextDecoder,a=t.decode(r),s=a.split("\n");return s.length>0&&""==s[s.length-1]&&s.pop(),s}function dt(e,n,r){return pt.apply(this,arguments)}function pt(){return pt=(0,x.Z)(k().mark((function e(n,r,t){var a,s,o,u,i,c,l,f,d,p,m,h,v;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("human"==r?(a=ct,o=at,s=ot):(a=lt,o=st,s=ut),Hr(),n in o){e.next=21;break}return e.next=5,Promise.all([$r(it+"/"+encodeURIComponent(a+"/"+n+"_genes.csv.gz")),$r(it+"/"+encodeURIComponent(a+"/"+n+"_labels_fine.csv.gz")),$r(it+"/"+encodeURIComponent(a+"/"+n+"_label_names_fine.csv.gz")),$r(it+"/"+encodeURIComponent(a+"/"+n+"_markers_fine.gmt.gz")),$r(it+"/"+encodeURIComponent(a+"/"+n+"_matrix.csv.gz"))]);case 5:u=e.sent,console.log(u),e.prev=7,i=M.tY(new Uint8Array(u[4]),new Uint8Array(u[3]),new Uint8Array(u[1])),c=ft(new Uint8Array(u[0])),l=[],f=[],c.forEach((function(e){var n=e.split(",");l.push(n[0]),f.push(n[1])})),d=ft(new Uint8Array(u[2])),o[n]={raw:i,genes:{ensembl:l,symbol:f},labels:d},e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(7),T(i),e.t0;case 21:if(n in s&&!t){e.next=35;break}e.prev=22,n in s&&T(s[n].raw),p=o[n],m=p.raw,h="ensembl"===nt.feature_details.type?p.genes.ensembl:p.genes.symbol,v=M.St(nt.features,m,h),s[n]={features:h,raw:v},e.next=35;break;case 31:throw e.prev=31,e.t1=e.catch(22),T(undefined),e.t1;case 35:return e.abrupt("return",{loaded:o[n],built:s[n]});case 36:case"end":return e.stop()}}),e,null,[[7,17],[22,31]])}))),pt.apply(this,arguments)}function mt(e){if(Kr||F||z(rt,e)){var n=!1;!F&&"feature_space"in nt||(n=!0,function(){for(var e=ne(),n=re(),r=null,t=null,a=0,s=Object.entries(n);a<s.length;a++){var o=(0,S.Z)(s[a],2),u=o[0],i=o[1];(null===t||i.confidence>t.confidence)&&(r=u,t=i)}nt.features=e[r],nt.feature_details=t}());var r=nt.feature_details.species,t=(Hr(),{});if("human"==r){var a,s=(0,N.Z)(e.human_references);try{for(s.s();!(a=s.n()).done;){var o=a.value;t[o]=dt(o,"human",n)}}catch(E){s.e(E)}finally{s.f()}}else if("mouse"==r){var u,i=(0,N.Z)(e.mouse_references);try{for(i.s();!(u=i.n()).done;){var c=u.value;t[c]=dt(c,"mouse",n)}}catch(E){i.e(E)}finally{i.f()}}for(var l=nt.features.length,f=Vr(),d=U(f*l,"Float64Array",nt),p=0;p<f;p++){var m=Xr(p,!1);d.array().set(m,p*l)}nt.results={};for(var h=0,v=Object.entries(t);h<v.length;h++){var y=(0,S.Z)(v[h],2),g=y[0],b=y[1];nt.results[g]=b.then((function(e){var n,r=M.pG(d,e.built.raw,{numberOfFeatures:l,numberOfCells:f}),t=[],a=(0,N.Z)(r);try{for(a.s();!(n=a.n()).done;){var s=n.value;t.push(e.loaded.labels[s])}}catch(E){a.e(E)}finally{a.f()}return t}))}var w=Object.keys(t);if(w.length>1){if(n||z(w,nt.used)){var _=Object.values(t);nt.integrated=Promise.all(_).then((function(e){var n=e.map((function(e){return e.loaded.raw})),r=e.map((function(e){return e.built.features})),t=e.map((function(e){return e.built.raw}));return M.Qj(nt.features,n,r,t)}))}nt.integrated_results=nt.integrated.then(function(){var e=(0,x.Z)(k().mark((function e(n){var r,t,a,s,o,u;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=[],t=(0,N.Z)(w),e.prev=2,t.s();case 4:if((a=t.n()).done){e.next=13;break}return s=a.value,e.t0=r,e.next=9,nt.results[s];case 9:e.t1=e.sent,e.t0.push.call(e.t0,e.t1);case 11:e.next=4;break;case 13:e.next=18;break;case 15:e.prev=15,e.t2=e.catch(2),t.e(e.t2);case 18:return e.prev=18,t.f(),e.finish(18);case 21:return o=M.Os(d,r,n,{numberOfFeatures:l,numberOfCells:f}),u=[],o.forEach((function(e){u.push(w[e])})),e.abrupt("return",u);case 25:case"end":return e.stop()}}),e,null,[[2,15,18,21]])})));return function(n){return e.apply(this,arguments)}}())}else T(nt.integrated),delete nt.integrated_results;nt.used=w,tt=!0,delete nt.reloaded}else tt=!1}function ht(){return vt.apply(this,arguments)}function vt(){return(vt=(0,x.Z)(k().mark((function e(){var n,r,t,a,s,o,u;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!("reloaded"in nt)){e.next=4;break}return e.abrupt("return",nt.reloaded);case 4:n={},r=0,t=Object.entries(nt.results);case 6:if(!(r<t.length)){e.next=14;break}return a=(0,S.Z)(t[r],2),s=a[0],o=a[1],e.next=10,o;case 10:n[s]=e.sent;case 11:r++,e.next=6;break;case 14:if(u={per_reference:n},!("integrated_results"in nt)){e.next=19;break}return e.next=18,nt.integrated_results;case 18:u.integrated=e.sent;case 19:return console.log(u),e.abrupt("return",u);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yt(){return gt.apply(this,arguments)}function gt(){return(gt=(0,x.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=rt,e.next=3,ht();case 3:return e.t1=e.sent,e.abrupt("return",{parameters:e.t0,contents:e.t1});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bt(e){rt=e.parameters,nt.reloaded=e.contents}var wt,xt={results:{}},St={selections:{}},_t=!1;function kt(e){if(Ne){St.selections={};for(var n=0,r=Object.entries(xt.results);n<r.length;n++){var t=(0,S.Z)(r[n],2);t[0];T(t[1].raw)}xt.results={}}_t=!0}function Mt(){return{}}function Et(){for(var e={},n=0,r=Object.entries(xt.results);n<r.length;n++){var t=(0,S.Z)(r[n],2),a=t[0],s=t[1];e[a]="reloaded"in s?s.reloaded:jr(s.raw,1)}return{parameters:St,contents:{results:e}}}function Nt(e){St=e.parameters;for(var n=0,r=Object.entries(e.contents);n<r.length;n++){var t=(0,S.Z)(r[n],2),a=t[0],s=t[1];xt.results[a]={reloaded:s}}}function Ot(e,n){var r=Ke(),t=U(r.numberOfColumns(),"Int32Array",xt);t.fill(0);var a=t.array();n.forEach((function(e){a[e]=1}));var s=M.y5(r,t);e in xt.results&&(T(xt.results[e].raw),delete xt.results[e]),xt.results[e]={raw:s},St.selections[e]=n}function Tt(e){T(xt.results[e].raw),delete xt.results[e],delete St.selections[e]}function At(e,n){var r=xt.results[e];return Dr(r.raw,r.reloaded,n,1)}var zt=null;function Gt(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===n&&(n=wt.result.transaction(["analysis_meta"],"readonly").objectStore("analysis_meta"));var r=n.getAll();r.onsuccess=function(){var n=r.result;n.forEach((function(e){delete e.files})),e(n)},r.onerror=function(){e(null)}}function Ut(e,n){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,x.Z)(k().mark((function e(n,r){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var t=r.get(n);t.onsuccess=function(){void 0!==t.result?e(t.result):e(null)},t.onerror=function(){e(null)}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ct(e){return Promise.allSettled(e).then((function(e){var n,r=(0,N.Z)(e);try{for(r.s();!(n=r.n()).done;){if(!n.value)return!1}}catch(t){r.e(t)}finally{r.f()}return!0}))}function jt(){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,x.Z)(k().mark((function e(){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zt;case 2:return e.abrupt("return",new Promise((function(e){Gt(e)})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dt(e,n){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,x.Z)(k().mark((function e(n,r){var t,a,s,o,u,i,c;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zt;case 2:return t=wt.result.transaction(["file","file_meta"],"readwrite"),a=t.objectStore("file"),s=t.objectStore("file_meta"),e.next=7,Ut(n,s);case 7:return o=e.sent,u=null===o?0:o.count,u++,i=new Promise((function(e){var t=a.put({id:n,payload:r});t.onsuccess=function(n){e(!0)},t.onerror=function(n){e(!1)}})),c=new Promise((function(e){o.count=u;var n=s.put(o);n.onsuccess=function(n){e(!0)},n.onerror=function(n){e(!1)}})),e.abrupt("return",Ct([i,c]));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bt(e,n,r,t){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,x.Z)(k().mark((function e(n,r,t,a){var s,o,u,i,c,l;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zt;case 2:if(s=wt.result.transaction(["analysis","analysis_meta"],"readwrite"),o=s.objectStore("analysis"),u=s.objectStore("analysis_meta"),null!=n){e.next=10;break}return e.next=8,new Promise((function(e){return Gt(e,u)}));case 8:i=e.sent,n=String(i.length);case 10:return c=new Promise((function(e){var t=o.put({id:n,payload:r});t.onsuccess=function(n){e(!0)},t.onerror=function(n){e(!1)}})),l=new Promise((function(e){var r=u.put({id:n,files:t,time:Number(new Date),title:a});r.onsuccess=function(n){e(!0)},r.onerror=function(n){e(!1)}})),e.next=14,Ct([c,l]);case 14:if(!e.sent){e.next=18;break}return e.abrupt("return",n);case 18:return e.abrupt("return",null);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function It(e){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,x.Z)(k().mark((function e(n){var r,t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zt;case 2:return r=wt.result.transaction(["file"],"readonly").objectStore("file"),e.next=5,Ut(n,r);case 5:return t=e.sent,e.abrupt("return",t.payload);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qt(){return(qt=(0,x.Z)(k().mark((function e(n){var r,t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zt;case 2:return r=wt.result.transaction(["analysis"],"readonly").objectStore("analysis"),e.next=5,Ut(n,r);case 5:return t=e.sent,e.abrupt("return",t.payload);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Wt(e){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,x.Z)(k().mark((function e(n){var r,t,a,s,o,u;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zt;case 2:return r=wt.result.transaction(["file","file_meta"],"readwrite"),t=r.objectStore("file"),a=r.objectStore("file_meta"),e.next=7,Ut(n,a);case 7:return s=e.sent,o=s.count,o--,u=[],0==o?(u.push(new Promise((function(e){var r=t.remove(n);r.onerror=function(n){e(!1)},r.onsuccess=function(n){e(!0)}}))),u.push(new Promise((function(e){var r=a.delete(n);r.onerror=function(n){e(!1)},r.onsuccess=function(n){e(!0)}})))):u.push(new Promise((function(e){s.count=o;var n=a.put(s);n.onsuccess=function(n){e(!0)},n.onerror=function(n){e(!1)}}))),e.abrupt("return",Ct(u));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jt(){return(Jt=(0,x.Z)(k().mark((function e(n){var r,t,a,s,o,u,i,c;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zt;case 2:return r=wt.result.transaction(["analysis","analysis_meta"],"readwrite"),t=r.objectStore("analysis"),a=r.objectStore("analysis_meta"),(s=[]).push(new Promise((function(e){var r=t.delete(n);r.onsuccess=function(n){e(!0)},r.onerror=function(n){e(!1)}}))),e.next=9,Ut(n,a);case 9:o=e.sent,u=(0,N.Z)(o.files);try{for(u.s();!(i=u.n()).done;)c=i.value,s.push(Wt(c))}catch(l){u.e(l)}finally{u.f()}return s.push(new Promise((function(e){var r=a.delete(n);r.onsuccess=function(n){e(!0)},r.onerror=function(n){e(!1)}}))),e.abrupt("return",Ct(s));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qt,Vt=r(8109);function Xt(e){if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=Xt(e[n]);else if(ArrayBuffer.isView(e))e={_TypedArray_class:e.constructor.name,_TypedArray_values:Array.from(e)};else if(e instanceof Object)for(var r=0,t=Object.entries(e);r<t.length;r++){var a=(0,S.Z)(t[r],2),s=a[0],o=a[1];e[s]=Xt(o)}return e}function Yt(e){if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=Yt(e[n]);else if(e instanceof Object)if("_TypedArray_class"in e){var r=e[["_TypedArray_class"]],t=e[["_TypedArray_values"]];switch(r){case"Uint8Array":case"Uint8Array":e=new Uint8Array(t.length);break;case"Int8Array":e=new Int8Array(t.length);break;case"Uint16Array":e=new Uint16Array(t.length);break;case"Int16Array":e=new Int16Array(t.length);break;case"Uint32Array":e=new Uint32Array(t.length);break;case"Int32Array":e=new Int32Array(t.length);break;case"Uint64Array":e=new Uint64Array(t.length);break;case"Int64Array":e=new Int64Array(t.length);break;case"Float32Array":e=new Float32Array(t.length);break;case"Float64Array":e=new Float64Array(t.length);break;default:throw"unrecognized TypedArray class '"+r}e.set(t)}else for(var a=0,s=Object.entries(e);a<s.length;a++){var o=(0,S.Z)(s[a],2),u=o[0],i=o[1];e[u]=Yt(i)}return e}function Ht(e){for(var n=new Uint8Array(8),r=0;e>0;)n[r]=e%256,e=Math.floor(e/256),r++;return n}function $t(e){var n,r=0,t=1,a=(0,N.Z)(e);try{for(a.s();!(n=a.n()).done;){r+=t*n.value,t*=256}}catch(s){a.e(s)}finally{a.f()}return r}function ea(e){return na.apply(this,arguments)}function na(){return na=(0,x.Z)(k().mark((function e(n){var r,t,a,s,o,u,i,c,l,f,d,p,m,h,v,y,g,b,w,x,S,_,M=arguments;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=M.length>1&&void 0!==M[1]?M[1]:"full",t=n.inputs.parameters.files,a=[],s=0,"full"!=r){e.next=9;break}o=0,t.forEach((function(e,n){var r=e.buffer;a.push(r),t[n].buffer={offset:s,size:r.byteLength},s+=r.byteLength})),e.next=40;break;case 9:if("KanaDB"!=r){e.next=39;break}o=1,u=(0,N.Z)(t),e.prev=12,u.s();case 14:if((i=u.n()).done){e.next=29;break}return c=i.value,e.next=18,Vt.FB(new Uint8Array(c.buffer));case 18:return l=e.sent,f=c.type+"_"+c.name+"_"+c.buffer.byteLength+"_"+l,e.next=22,Dt(f,c.buffer);case 22:if(e.sent){e.next=25;break}throw"failed to save file '"+f+"' to KanaDB";case 25:c.buffer=f,a.push(f);case 27:e.next=14;break;case 29:e.next=34;break;case 31:e.prev=31,e.t0=e.catch(12),u.e(e.t0);case 34:return e.prev=34,u.f(),e.finish(34);case 37:e.next=40;break;case 39:throw"unsupported mode "+r;case 40:if(n=Xt(n),d=JSON.stringify(n),p=Z.iv(d),m=new ArrayBuffer(24+p.length+s),h=new Uint8Array(m),v=0,y=Ht(o),h.set(y,v),v+=y.length,g=Ht(0),h.set(g,v),v+=g.length,b=Ht(p.length),h.set(b,v),24==(v+=b.length)){e.next=57;break}throw"oops - accounting error in the serialization code!";case 57:if(h.set(p,v),v+=p.length,"full"!=r){e.next=65;break}w=(0,N.Z)(a);try{for(w.s();!(x=w.n()).done;)S=x.value,_=new Uint8Array(S),h.set(_,v),v+=_.length}catch(k){w.e(k)}finally{w.f()}return e.abrupt("return",m);case 65:if("KanaDB"!=r){e.next=69;break}return e.abrupt("return",{file_ids:a,state:m});case 69:throw"unsupported mode "+r;case 70:case"end":return e.stop()}}),e,null,[[12,31,34,37]])}))),na.apply(this,arguments)}function ra(e){return ta.apply(this,arguments)}function ta(){return(ta=(0,x.Z)(k().mark((function e(n){var r,t,a,s,o,u,i;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=0,t=$t(new Uint8Array(n,r,8)),r+=8,$t(new Uint8Array(n,r,8)),r+=8,a=$t(new Uint8Array(n,r,8)),r+=8,s=Z.ec(new Uint8Array(n,r,a),{to:"string"}),s=Yt(s=JSON.parse(s)),r+=a,o=s.inputs.parameters.files,0!=t){e.next=16;break}o.forEach((function(e,t){var a=e.buffer,s=new Uint8Array(n,r+a.offset,a.size),u=new ArrayBuffer(a.size);new Uint8Array(u).set(s),o[t].buffer=u})),e.next=26;break;case 16:if(1!=t){e.next=25;break}return u=[],o.forEach((function(e,n){var r=e.buffer;u.push(It(r))})),e.next=21,Promise.all(u);case 21:i=e.sent,o.forEach((function(e,n){if(null===i[n])throw"KanaDB loading failed for file ID '"+e.buffer+"'";e.buffer=i[n]})),e.next=26;break;case 25:throw"unsupported format type";case 26:return e.abrupt("return",s);case 27:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aa(e,n,r){var t=[];R(e,t),postMessage({type:"".concat(n,"_DATA"),resp:e,msg:"Success: "+r},t)}function sa(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"run",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("serialize"===n)e={};else{if(null==r)throw"'state' must be supplied if 'mode' is not 'serialize'";"unserialize"===n&&(console.log(r),e={params:{}})}var x=function(e,r,t){(e.changed||"unserialize"==n)&&aa(e.results(),r,t)},_=function(e,r,t){(e.changed||"unserialize"==n)&&e.results().then((function(e){aa(e,r,t)}))},k=function(n,r){var t=r.serialize();null!==t&&(e[n]=t)},M=function(n,r,t){var a=e.params;if(n in a)for(var s=0,o=Object.entries(r);s<o.length;s++){var u=(0,S.Z)(o[s],2),i=u[0],c=u[1];a[n][i]=c}else a[n]=r},E={},N="inputs";"serialize"===n?k(N,t):("run"==n?V({format:r.files.format,files:r.files.files}):(H(r[N]),e.files={format:"kana",files:[]}),x(t,N,"Count matrix loaded"));var O="quality_control_metrics";"serialize"===n?k(O,a):("run"==n?le({use_mito_default:r.params.qc["qc-usemitodefault"],mito_prefix:r.params.qc["qc-mito"]}):(pe(r[O]),M("qc",{"qc-usemitodefault":r[O].parameters.use_mito_default,"qc-mito":r[O].parameters.mito_prefix})),x(a,O,"QC metrics computed"));var T="quality_control_thresholds";"serialize"===n?k(T,s):("run"==n?be({nmads:r.params.qc["qc-nmads"]}):(Se(r[T]),M("qc",{"qc-nmads":r[T].parameters.nmads})),x(s,T,"QC thresholds computed"));var A="quality_control_filtered";"serialize"==n?k(A,o):("run"==n?Te({}):Ge(r[A]),x(o,A,"QC filtering completed"));var z="normalization";"serialize"==n?k(z,u):("run"==n?Pe({}):Ie(r[z]),x(u,z,"Log-normalization completed"));var G="feature_selection";"serialize"==n?k(G,i):("run"==n?Qe({span:r.params.fSelection["fsel-span"]}):(Ye(r[G]),M("fSelection",{"fsel-span":r[G].parameters.span})),x(i,G,"Variance modelling completed"));var U="pca";"serialize"==n?k(U,c):("run"==n?an({num_hvgs:r.params.pca["pca-hvg"],num_pcs:r.params.pca["pca-npc"]}):(un(r[U]),M("pca",{"pca-hvg":r[U].parameters.num_hvgs,"pca-npc":r[U].parameters.num_pcs})),x(c,U,"Principal components analysis completed"));var R="neighbor_index";"serialize"==n?k(R,l):("run"==n?mn({approximate:r.params.cluster["clus-approx"]}):(yn(r[R]),M("cluster",{"clus-approx":r[R].parameters.approximate})),x(l,R,"Neighbor search index constructed"));var C="tsne";"serialize"==n?E[C]=wr():("run"==n?gr({perplexity:r.params.tsne["tsne-perp"],iterations:r.params.tsne["tsne-iter"],animate:r.params.tsne.animate}):(Sr(r[C]),M("tsne",{"tsne-perp":r[C].parameters.perplexity,"tsne-iter":r[C].parameters.iterations,animate:r[C].parameters.animate})),_(v,C,"t-SNE completed"));var j="umap";"serialize"==n?E[j]=Gr():("run"==n?Ar({num_epochs:r.params.umap["umap-epochs"],num_neighbors:r.params.umap["umap-nn"],min_dist:r.params.umap["umap-min_dist"],animate:r.params.umap.animate}):(Rr(r[j]),M("umap",{"umap-epochs":r[j].parameters.num_epochs,"umap-nn":r[j].parameters.num_neighbors,"umap-min_dist":r[j].parameters.min_dist,animate:r[j].parameters.animate})),_(y,j,"UMAP completed"));var Z="kmeans_cluster";"serialize"==n?k(Z,m):("run"==n?Vn({k:r.params.cluster["kmeans-k"],cluster_method:r.params.cluster["clus-method"]}):Z in r&&(Hn(r[Z]),M("cluster",{"kmeans-k":r[Z].parameters.k})),x(m,Z,"K-means clustering completed"));var D="snn_find_neighbors";"serialize"==n?k(D,f):("run"==n?_n({k:r.params.cluster["clus-k"],cluster_method:r.params.cluster["clus-method"]}):(En(r[D]),M("cluster",{"clus-k":r[D].parameters.k})),x(f,D,"Shared nearest neighbor search completed"));var P="snn_build_graph";"serialize"==n?k(P,d):("run"==n?Gn({scheme:r.params.cluster["clus-scheme"]}):(Cn(r[P]),M("cluster",{"clus-scheme":r[P].parameters.scheme})),x(d,P,"Shared nearest neighbor graph constructed"));var B="snn_cluster_graph";"serialize"==n?k(B,p):("run"==n?Fn({resolution:r.params.cluster["clus-res"]}):(qn(r[B]),M("cluster",{"clus-res":r[B].parameters.resolution})),x(p,B,"Community detection from SNN graph complete"));var F="choose_clustering";"serialize"==n?k(F,h):("run"==n?rr({method:r.params.cluster["clus-method"]}):(sr(r[F]),M("cluster",{"clus-method":r[F].parameters.method})),x(h,F,"Clustering of interest chosen"));var I="marker_detection";"serialize"==n?k(I,g):("run"==n?qr({}):Jr(r[I]),x(g,I,"Marker detection complete"));var K="cell_labelling";if("serialize"==n)E[K]=yt();else{if("run"==n){var q=r.params.annotateCells["annotateCells-species"],W={species:q,human_references:r.params.annotateCells["annotateCells-human_references"],mouse_references:r.params.annotateCells["annotateCells-mouse_references"]};mt(W)}else bt(r[K]);_(b,K,"Cell type labelling complete")}var L="custom_marker_management";if("serialize"==n?k(L,w):("run"==n?kt():Nt(r[L]),x(w,L,"Pruning of custom markers finished")),"serialize"==n){var J=Object.keys(E),Q=Object.values(E);return Promise.all(Q).then((function(n){return n.forEach((function(n,r){e[J[r]]=n})),e}))}return e}onmessage=function(e){var n=e.data;if("INIT"==n.type){var r=Math.round(2*navigator.hardwareConcurrency/3),t=M.j2({numberOfThreads:r});t.then((function(e){postMessage({type:n.type,msg:"Success: ScranJS/WASM initialized"})}));var a=zt=new Promise((function(e){(wt=indexedDB.open("KanaDB",2)).onupgradeneeded=function(e){var n=e.target.result;try{n.deleteObjectStore("analysis")}catch(e){}try{n.deleteObjectStore("analysis_meta")}catch(e){}try{n.deleteObjectStore("file")}catch(e){}try{n.deleteObjectStore("file_meta")}catch(e){}n.createObjectStore("analysis",{keyPath:"id"}),n.createObjectStore("analysis_meta",{keyPath:"id"}),n.createObjectStore("file",{keyPath:"id"}),n.createObjectStore("file_meta",{keyPath:"id"})},wt.onsuccess=function(){Gt(e)},wt.onerror=function(){e(null)}}));a.then((function(e){null!==e?postMessage({type:"KanaDB_store",resp:e,msg:"Success"}):(console.error(error),postMessage({type:"KanaDB_ERROR",msg:"Fail: Cannot initialize DB"}))}));var s=hr(),o=Nr();Qt=Promise.all([t,a,s,o])}else if("RUN"==n.type)Qt.then((function(e){sa("run",n.payload)})).catch((function(e){console.error(e),postMessage({type:"run_ERROR",msg:e.toString()})}));else if("LOAD"==n.type){if("kana"==n.payload.files.format){var u=new FileReaderSync,i=n.payload.files.files.file[0];Qt.then(function(){var e=(0,x.Z)(k().mark((function e(n){var r,t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ra(u.readAsArrayBuffer(i));case 2:r=e.sent,t=sa("unserialize",r),postMessage({type:"loadedParameters",resp:t});case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),postMessage({type:"load_ERROR",msg:e.toString()})}))}else if("kanadb"==n.payload.files.format){(function(e){return qt.apply(this,arguments)})(l=n.payload.files.files.file).then(function(){var e=(0,x.Z)(k().mark((function e(n){var r,t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=n){e.next=4;break}postMessage({type:"KanaDB_ERROR",msg:"Fail: cannot load analysis ID '".concat(l,"'")}),e.next=11;break;case 4:return e.next=6,ra(n);case 6:return r=e.sent,e.next=9,sa("unserialize",r);case 9:t=e.sent,postMessage({type:"loadedParameters",resp:t});case 11:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),postMessage({type:"load_ERROR",msg:e.toString()})}))}}else if("EXPORT"==n.type)Qt.then(function(){var e=(0,x.Z)(k().mark((function e(n){var r,t;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sa("serialize");case 2:return r=e.sent,e.next=5,ea(r,"full");case 5:t=e.sent,postMessage({type:"exportState",resp:t,msg:"Success: application state exported"},[t]);case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),postMessage({type:"export_ERROR",msg:e.toString()})}));else if("SAVEKDB"==n.type){var c=n.payload.title;Qt.then(function(){var e=(0,x.Z)(k().mark((function e(n){var r,t,a,s;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sa("serialize");case 2:return r=e.sent,e.next=5,ea(r,"KanaDB");case 5:return t=e.sent,e.next=8,Bt(null,t.state,t.file_ids,c);case 8:if(null===(a=e.sent)){e.next=16;break}return e.next=12,jt();case 12:s=e.sent,postMessage({type:"KanaDB_store",resp:s,msg:"Success: Saved analysis to cache (".concat(a,")")}),e.next=18;break;case 16:console.error(error),postMessage({type:"KanaDB_ERROR",msg:"Fail: Cannot save analysis to cache (".concat(a,")")});case 18:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()).catch((function(e){console.error(e),postMessage({type:"export_ERROR",msg:e.toString()})}))}else if("REMOVEKDB"==n.type){var l;(function(e){return Jt.apply(this,arguments)})(l=n.payload.id).then(function(){var e=(0,x.Z)(k().mark((function e(n){var r;return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return e.next=3,jt();case 3:r=e.sent,postMessage({type:"KanaDB_store",resp:r,msg:"Success: Removed file from cache (".concat(l,")")}),e.next=9;break;case 7:console.error(error),postMessage({type:"KanaDB_ERROR",msg:"fail: cannot remove file from cache (".concat(l,")")});case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}else"getMarkersForCluster"==n.type?Qt.then((function(e){var r=n.payload.cluster,t=Qr(n.payload.rank_type,r),a=[];R(t,a),postMessage({type:"setMarkersForCluster",resp:t,msg:"Success: GET_MARKER_GENE done"},a)})):"getGeneExpression"==n.type?Qt.then((function(e){var r=n.payload.gene,t=qe(r);postMessage({type:"setGeneExpression",resp:{gene:r,expr:t},msg:"Success: GET_GENE_EXPRESSION done"},[t.buffer])})):"computeCustomMarkers"==n.type?Qt.then((function(e){Ot(n.payload.id,n.payload.selection),postMessage({type:"computeCustomMarkers",msg:"Success: COMPUTE_CUSTOM_MARKERS done"})})):"getMarkersForSelection"==n.type?Qt.then((function(e){var r=At(n.payload.cluster,n.payload.rank_type),t=[];R(r,t),postMessage({type:"setMarkersForCustomSelection",resp:r,msg:"Success: GET_MARKER_GENE done"},t)})):"removeCustomMarkers"==n.type?Qt.then((function(e){Tt(n.payload.id)})):"animateTSNE"==n.type?Qt.then(function(){var e=(0,x.Z)(k().mark((function e(n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_r();case 2:return e.next=4,br();case 4:aa(e.sent,"tsne","Resending t-SNE coordinates");case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()):"animateUMAP"==n.type?Qt.then(function(){var e=(0,x.Z)(k().mark((function e(n){return k().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cr();case 2:return e.next=4,zr();case 4:aa(e.sent,"umap","Resending UMAP coordinates");case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()):"getAnnotation"==n.type?Qt.then((function(e){var r=n.payload.annotation,t=te(r);postMessage({type:"setAnnotation",resp:{annotation:r,values:{index:t.index,factor:t.factor}},msg:"Success: GET_ANNOTATION done"},[t.factor.buffer])})):console.error("MIM:::msg type incorrect")}}},n={};function r(t){var a=n[t];if(void 0!==a)return a.exports;var s=n[t]={exports:{}};return e[t](s,s.exports,r),s.exports}r.m=e,r.x=function(){var e=r.O(void 0,[275,555],(function(){return r(4109)}));return e=r.O(e)},function(){var e=[];r.O=function(n,t,a,s){if(!t){var o=1/0;for(l=0;l<e.length;l++){t=e[l][0],a=e[l][1],s=e[l][2];for(var u=!0,i=0;i<t.length;i++)(!1&s||o>=s)&&Object.keys(r.O).every((function(e){return r.O[e](t[i])}))?t.splice(i--,1):(u=!1,s<o&&(o=s));if(u){e.splice(l--,1);var c=a();void 0!==c&&(n=c)}}return n}s=s||0;for(var l=e.length;l>0&&e[l-1][2]>s;l--)e[l]=e[l-1];e[l]=[t,a,s]}}(),r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,{a:n}),n},r.d=function(e,n){for(var t in n)r.o(n,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(n,t){return r.f[t](e,n),n}),[]))},r.u=function(e){return"static/js/"+e+"."+{139:"1c21bba7",275:"66af1466",495:"961c2f19",555:"39d4c1fb",653:"b182baa9"}[e]+".chunk.js"},r.miniCssF=function(e){},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/kana/",function(){r.b=self.location+"/../../../";var e={109:1};r.f.i=function(n,t){e[n]||importScripts(r.p+r.u(n))};var n=self.webpackChunkkana=self.webpackChunkkana||[],t=n.push.bind(n);n.push=function(n){var a=n[0],s=n[1],o=n[2];for(var u in s)r.o(s,u)&&(r.m[u]=s[u]);for(o&&o(r);a.length;)e[a.pop()]=1;t(n)}}(),function(){var e=r.x;r.x=function(){return Promise.all([r.e(275),r.e(555)]).then(e)}}();r.x()}();
//# sourceMappingURL=109.91244675.chunk.js.map